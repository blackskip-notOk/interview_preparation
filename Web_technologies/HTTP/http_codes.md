# **Коды состояния в HTTP протоколе**

Код состояния – это элемент ответа **HTTP** сервера, который представляет собой три цифры, первая цифра показывает к какому классу состояния относится тот или иной код состояния. Коды состояний расширяемы, любой разработчик сервера может добавлять свои коды. Каждый код состояния очень тесно связан с **HTTP** методами: если метод – это элемент **HTTP** запроса, то код состояния это **HTTP** ответ сервера, который означает то, как сервер понял запрос.

## **1xx: информационные. Такой код состояния сервер высылает в том случае, когда запрос получен, но еще не обработан:**

* 100 Continue - продолжай. Запрос получен, но находится в процессе обработки, является промежуточным и означает то, что начальная часть запроса получена и сервер ждет продолжения.

## **2xx: успешные. Сервер отправит вам такой код в том случае, когда он успешно принял и обработал HTTP сообщение клиента:**

* 200 OK - хорошо. Запрос клиента был успешно принят и обработан. В ответ на GET клиент получит HTTP сообщение с 200 и объект, который расположен по указанному URI в запросе. POST - описание объекта или результатом действия POST. TRACE - сообщение, полученное конечным сервером. HEAD - сообщение в котором не будет тела сообщения.

* 201 Created - создан. Запрос успешно выполнен и в результате этого запроса появился новый ресурс по указанному в запросе URI. Но сервер вместо 201 может послать 202 в том случае, если он не может выполнить запрос клиента немедленно.

* 202 Accepted - принято. Запрос успешно принят на обработку, но обработка сервером еще не завершена. В итоге сервер может выполнить запрос клиента, а может его отклонить. Ответы с 202 уклончивы и это сделано преднамеренно, например, для того, чтобы дать серверу выполнить какой-то более важный запрос, а потом ответить клиенту, которому он отправлял HTTP сообщение  202.

* 203 Non-authoritative Information - не авторская информация. 203 возвращает в заголовке своего сообщения информацию о том, что данное сообщение не является оригиналом, который доступен на первоначальном сервере и, возможно, информация взята из кэша HTTP сервера.

* 204 No Content - нет содержимого. Сервер успешно выполнил запрос, но никакой новой полезной информации нет. 204 используется чаще всего для работы с HTML формами для ввода пользовательских данных. Ответ 204 не должен содержать тела сообщения.

* 205 Reset Content - сбросить содержимое. Говорит браузеру о том, что ему следует отменить просмотр документа. 205 чаще всего используется для очистки форм с целью повторного или последующего ввода и не содержит HTTP объекта.

* 206 Partial Content - частичное содержимое. Был выполнен частичный метод GET. Чтобы получить такой код состояния запрос клиента должен содержать поле заголовка Range, в котором указывается диапазон в байтах, при этом ответ HTTP сервера должен содержать поле заголовка Content-Range, либо поле заголовка Content-Type.

## **3xx: перенаправление. Нужны дополнительные действия, чтобы завершить процесс обработки HTTP запроса:**

* 300 Multiple Choices - код множественного выбора - клиент может выбрать несколько доступных представлений ресурса, но не более пяти. Каждое представление ресурса имеет свое уникальное месторасположения на сервере. Формат, в котором клиент будет получать HTTP объект определяется медиа типом данных, указанным в поле заголовка Content-Type. Иногда выбор выполняется автоматически браузером без участия пользователя, но стандарт HTTP протокола не дает никаких критериев, по которым должен происходить автоматический выбор, а так же не имеет никаких требований. Ответы HTTP сервера с кодом состояния 300 по умолчанию являются кэшируемыми, если в заголовках не указано иного.

* 301 Moved Permanently - код состояния постоянного переноса. 301 сообщает браузеру о том, что для ресурса, к которому он обратился, назначен новый URI, и все обращения к этому ресурсу следует выполнять по новому URI, указанному в ответе HTTP сервера. Ответы сервера с кодом 301 являются кэшируемыми. В тех случаях, когда клиент использовал HTTP запрос с методом отличным от GET или HEAD, браузер спрашивает у пользователя, что делать дальше: переходить по новому URI или не надо.

* 302  Found - код временного перемещения ресурса. 302 говорит о том, что на данный момент ресурс временно доступен по другому URI и сообщает новый URI ресурса. Кэшируемость ответов сервера с кодом 302 зависит только от значений полей заголовка Cache-Control или Expires. В тех случаях, когда клиент использовал запрос с методом отличным от GET или HEAD, браузер спрашивает у пользователя, что делать дальше: переходить по новому URI или не надо.

* 303 See Other - смотреть другой ресурс. Ответ на запрос может быть найден по другому URI, новый запрос следует выполнять методом GET.

* 304 Not Modified - ресурс не модифицирован. Сервер выполнил условный GET запрос, но документ никак не изменился.

* 305 Use Proxy использовать прокси сервер. Запрошенный URL должен быть доступен через прокси, который указан в поле заголовка Location.

* 306 Unused - использовался в старых версиях протокола HTTP, но теперь является просто зарезервированным.

* 307 Temporary Redirect - временное перенаправление, аналогичен коду состояния 302. Запрашиваемая страница временно переехала на новый адрес

## **4xx: ошибка клиента. Не удалось получить запрашиваемый ресурс, указанный в URI, по вине самого пользователя или клиента:**

* 400 Bad Request - плохой запрос. Сервер не понял ваш запрос из-за синтаксической ошибке в запросе.

* 401 Unauthorized - не авторизован. Для доступа к ресурсу требуется аутентификация по соображениям безопасности HTTP сервера. При этом ответ сервера должен включать поле заголовка WWW-Authenticate и перечень условий для аутентификации клиента, после чего клиент может повторить запрос к серверу с полем Authorization, в котором будут указаны все необходимые данные для авторизации.

* 402 Payment Required - требуется оплата. Предназначен для платных сервисов.

* 403 Forbidden - запрещено. Недостаточно прав доступа.

* 404 Not Found - не найдено.

* 405 Method Not Allowed - метод не дозволен. Используется метод запроса, запрещенный в настройках HTTP сервера. 405 появляется в основном из-за конфигураций безопасности сервера, когда администратор преднамеренно запрещает выполнение тех или иных методов HTTP запросов на сервере. При этом ответ сервера с 405 должен содержать поле заголовка Allow, в котором будут указаны доступные метода для ресурса.

* 406 Not Acceptable - не приемлем. Сообщение клиента содержит неправильные параметры для указанного в нем URI. Если метод запроса был отличным от метода HEAD, то серверу нужно включить в тело сообщения список доступных характеристик для данного URI. Формат HTTP объекта определяется медиа типом в поле заголовка Content-Length и в зависимости от клиента и его возможностей подходящий вариант запроса может быть выбран автоматически, этот код применяется при обсуждении содержимого в HTTP.

* 407 Proxy Authentication Required - требуется установления подлинности через прокси-сервер. Нужно пройти аутентификацию на прокси-сервере. Когда возникает 407 прокси-сервер должен возвратить поле заголовка Proxy-Authenticate содержащее вызов (challenge), применяемый прокси-сервером для запрошенного ресурса. 407 аналогичен по своему действию с 401.

* 408 Request Timeout - истекло время ожидания запроса.

* 409 Conflict - конфликт. Конфликт действий между двумя пользователями. 409 показывается клиенту только в том случае, когда тот может устранить конфликт и повторить свой запрос. HTTP ответ сервера должен предоставить максимум информации для пользователя, чтобы он устранил конфликт, и 409 больше не появлялся. Чаще всего ошибка 409 появляется при использование метода PUT.

* 410 Gone - удален. Ресурс был доступен по указанному URI, но теперь его там нет. 410 будет отправлен сервером в том случае, когда ресурс удален и сервер не знает, где искать копию ресурса или его новую версию. В том случае, когда у сервера есть информация о том, что ресурс может быть восстановлен, ему не следует показывать 410, а лучше показать 404.

* 411 Length Required - требуется длина. Серверу нужно обязательно указывать поле заголовка Content-Lenght. 411 будет показан клиенту в том случае, когда серверу для корректной обработки запроса требуется длина содержимого. Клиент может повторить запрос, если добавит допустимое поле заголовка Content-Length, содержащее длину тела сообщения (message-body) в сообщении запроса.

* 412 Precondition Failed - предусловие неверно. Сервер не смог выполнить ни одно из условий из запроса клиента.

* 413 Request Entity Too Large - объект запроса слишком велик. Тело запроса слишком большое и сервер его получить не смог. Сервер может закрыть соединение, чтобы не дать клиенту возможность продолжить запрос. Если такая ситуация временная, то сервер в своем сообщении вместе с 413 передает поле заголовка Retry-After, в котором указывает время, через которое запрос может быть повторен.

* 414 Request-url Too Long - URI запроса слишком длинный.

* 415 Unsupported Media Type - неподдерживаемый медиа тип.

* 416 Requested Range Not Satisfiable - запрашиваемый диапазон не достижим. Диапазон фрагмента в поле заголовка Range указан неверно.

* 417 Expectation Failed - ожидаемое неприемлимо. Сервер не сможет удовлетворить значению, указанному в поле заголовка Expect.

## **5xx: серверная ошибка. Ошибка на стороне сервера:**

* 500 InternalServerError - внутренняя ошибка сервера. Может быть любая внутренняя ошибка HTTP сервера, которая не входит в рамки других ошибок, в том числе и ошибок, описанных в других классах.

* 501 NotImplemented - не реализовано. Сервер не может выполнить HTTP сообщение, полученное от клиента, из-за ограниченного функционала. 501 может возникнуть из-за настроек сервера. Часто 501 возникает из-за того, что сервер не может распознать метод, указанный в запросе.

* 502 BadGateway - ошибка шлюза. Серверное приложение действует в качестве шлюза или прокси-сервера и при этом он получил недопустимый ответ от следующего в цепочке запросов сервера, к которому обращался при попытке выполнить запрос.

* 503 ServiceUnavailable - сервис недоступен. В настоящее время сервер недоступен из-за его перегрузки или он находится на техническом обслуживание. Если сервер знает о продолжительности задержки, то вместе с 503, он может указать время в поле заголовка Retry-After.

* 504 GatewayTimeout - истекло время ожидания. HTTP сервер действует в роли прокси-сервера или шлюза и не получил своевременного ответа от следующего сервера, к которому он обращался, чтобы выполнить запрос.

* 505 HTTP VersionNotSupported - неподдерживаемая версия HTTP.
