# **FOUC**

**FOUC** - это аббревиатура от **flash unstyled content** и относится к явлению, которое происходит, когда веб-страница ненадолго появляется в браузере до того, как завершится загрузка внешней таблицы стилей. Визуальный рендеринг страницы в течение этого короткого периода времени может полностью отличаться от окончательного рендеринга. Таким образом, переключение с одного текста на другой, например с чистого текста на версию с графической обработкой, может помешать чтению страницы.

Это явление было описано в 2001 году в статье под названием «Вспышка нестилизованного контента». Это также может произойти, когда веб-страница использует **JavaScript** для изменения внешнего вида своего содержимого.

***

## **Исключить вспышку неравномерного содержимого**

Есть несколько способов как остановить **FOUC** на веб-странице:

* Установить раздел тела как:

````html
<body style="visibility: hidden;" onload="js_Load()">
````

Написать функцию `js_Load()`:

````js
document.body.style.visibility='visible';
````

При таком подходе тело веб-страницы будет скрыто до тех пор, пока не будут загружены полная страница и файлы **CSS**. Когда все загружено, событие `onload` превращает тело в видимое состояние. Таким образом, веб-браузер остается пустым до момента, когда все всплывает на экране. Проблема в том, что пользователи с оттключенным **javascript** никогда не увидят эти элементы. Таким образом, это решение, которое не грамотно деградирует.
Таким образом, лучший способ - использовать **javascript** для первоначального скрытия, а также для повторного отображения этих элементов после загрузки страницы. Используя **jQuery**, может возникнуть соблазн сделать что-то вроде этого:

````js
$(document).ready(function() {
    $('body').hide();
    $(window).on('load', function() {
        $('body').show();
    });
});
````

Однако, если страница с большим количеством элементов, тогда этот код не будет применен достаточно скоро (тело документа скоро не будет готово), и все равно можно увидеть **FOUC**. Однако есть один элемент, который можно скрыть, как только **script** встречается в голове, даже до того, как документ будет готов: тег **HTML**:

````html
<html>
  <head>
  <!-- Other stuff like title and meta tags go here -->
  <style type="text/css">
    .hidden {display:none;}
  </style>
  <script type="text/javascript" src="/scripts/jquery.js"></script>
  <script type="text/javascript">
    $('html').addClass('hidden');
    $(document).ready(function() {
        // EDIT: From Adam Zerner comment below: Rather use load:
        // $(window).on('load', function () {...});
      $('html').show();
      // EDIT: Can also use $('html').removeClass('hidden');
    });
   </script>
   </head>
   <body>
   <!-- Body Content -->
   </body>
</html>
````

***

* Решение только для CSS:

````html
<html>
  <head>
    <style>
      html {
        display: none;
      }
    </style>
    ...
  </head>
  <body>
    ...
    <link rel="stylesheet" href="app.css"> <!-- should set html { display: block; } -->
  </body>
</html>
````

Когда браузер анализирует **HTML** файл, первое, что он сделает - спрячет `<html>`. Последнее, что он сделает, - это загрузит стили, а затем отобразит весь контент с применением стилей. Преимущество этого решения по сравнению с решением, использующим **JavaScript**, заключается в том, что оно будет работать для пользователей, даже если у них отключен **JavaScript**.

***

* Решение, которое не зависит от **jQuery**, которое будет работать на всех текущих браузерах:

````js
<script type="text/javascript">
    var elm=document.getElementsByTagName("html")[0];
    elm.style.display="none";
    document.addEventListener("DOMContentLoaded",function(event) { elm.style.display="block"; });
</script>
````
